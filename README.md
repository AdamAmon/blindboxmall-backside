# ç›²ç›’æŠ½å¥–å•†åŸç³»ç»Ÿ

## é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªåŸºäº **MidwayJS + React + SQLite** çš„ç›²ç›’æŠ½å¥–å•†åŸç³»ç»Ÿï¼Œå®ç°äº†ç±»ä¼¼å¾®ä¿¡å°ç¨‹åºæ³¡æ³¡ç›ç‰¹çš„ç›²ç›’æŠ½å¥–åŠŸèƒ½ã€‚ç³»ç»Ÿé‡‡ç”¨å‰åç«¯ä¸€ä½“åŒ–æ¶æ„ï¼Œæ”¯æŒå¤šç”¨æˆ·æ³¨å†Œç™»å½•ã€ç›²ç›’ç®¡ç†ã€æŠ½å¥–ã€è®¢å•ç®¡ç†ã€ç©å®¶ç§€ç­‰å®Œæ•´åŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹æ€§

### âœ… åŸºç¡€åŠŸèƒ½ï¼ˆ8é¡¹æ ¸å¿ƒåŠŸèƒ½ï¼‰

1. **å¤šç”¨æˆ·æ³¨å†Œã€ç™»å½•** - æ”¯æŒç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€JWTè®¤è¯
2. **ç›²ç›’ç®¡ç†** - å•†å®¶å¯åˆ›å»ºã€ç¼–è¾‘ã€ä¸Šä¸‹æ¶ç›²ç›’
3. **ç›²ç›’æŠ½å–** - åŸºäºæ¦‚ç‡ç®—æ³•çš„æŠ½å¥–ç³»ç»Ÿ
4. **ç›²ç›’è®¢å•ç®¡ç†** - å®Œæ•´çš„è®¢å•åˆ›å»ºã€æ”¯ä»˜ã€å¼€ç›’æµç¨‹
5. **ç›²ç›’åˆ—è¡¨æŸ¥çœ‹** - æ”¯æŒåˆ†é¡µã€ç­›é€‰ã€æœç´¢åŠŸèƒ½
6. **ç›²ç›’è¯¦æƒ…æŸ¥çœ‹** - è¯¦ç»†çš„ç›²ç›’ä¿¡æ¯å’Œå•†å“å±•ç¤º
7. **ç©å®¶ç§€** - ç”¨æˆ·åˆ†äº«æŠ½å¥–æˆæœçš„ç¤¾åŒºåŠŸèƒ½
8. **ç›²ç›’æœç´¢** - æ”¯æŒå…³é”®è¯ã€ä»·æ ¼ã€ç¨€æœ‰åº¦ç­‰å¤šç»´åº¦æœç´¢

### ğŸ¯ é™„åŠ åŠŸèƒ½

- **æ”¯ä»˜å®æ”¯ä»˜é›†æˆ** - æ”¯æŒæ²™ç›’ç¯å¢ƒ
- **åœ°å€ç®¡ç†** - æ”¶è´§åœ°å€çš„å¢åˆ æ”¹æŸ¥
- **ä¼˜æƒ åˆ¸ç³»ç»Ÿ** - ä¼˜æƒ åˆ¸å‘æ”¾å’Œä½¿ç”¨
- **Dockerå®¹å™¨åŒ–éƒ¨ç½²** - ä¸€é”®éƒ¨ç½²è„šæœ¬

## æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯
- **æ¡†æ¶**: MidwayJS 3.x (Node.js + TypeScript)
- **æ•°æ®åº“**: SQLite (è½»é‡çº§ã€é›¶é…ç½®)
- **ORM**: TypeORM
- **è®¤è¯**: JWT
- **APIæ–‡æ¡£**: Swagger UI
- **æ–‡ä»¶ä¸Šä¼ **: @midwayjs/busboy
- **è·¨åŸŸæ”¯æŒ**: @midwayjs/cross-domain
- **ä»£ç è§„èŒƒ**: ESLint + Prettier
- **æµ‹è¯•**: Jest + Supertest

### å‰ç«¯æŠ€æœ¯
- **æ¡†æ¶**: React 18 + Vite
- **æ ·å¼**: TailwindCSS
- **è·¯ç”±**: React Router
- **HTTPå®¢æˆ·ç«¯**: Axios
- **æ„å»ºå·¥å…·**: Vite
- **ä»£ç è§„èŒƒ**: ESLint

### éƒ¨ç½²æŠ€æœ¯
- **å®¹å™¨åŒ–**: Docker + Docker Compose
- **CI/CD**: GitHub Actions
- **å¹³å°æ”¯æŒ**: Windows, Linux, macOS

## ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯ (React)   â”‚    â”‚   åç«¯ (Midway)  â”‚    â”‚   æ•°æ®åº“ (SQLite) â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ ç”¨æˆ·ç•Œé¢      â”‚â—„â”€â”€â–ºâ”‚ â€¢ RESTful API   â”‚â—„â”€â”€â–ºâ”‚ â€¢ ç”¨æˆ·æ•°æ®      â”‚
â”‚ â€¢ ç»„ä»¶åŒ–è®¾è®¡    â”‚    â”‚ â€¢ ä¸šåŠ¡é€»è¾‘      â”‚    â”‚ â€¢ ç›²ç›’æ•°æ®      â”‚
â”‚ â€¢ å“åº”å¼å¸ƒå±€    â”‚    â”‚ â€¢ æ•°æ®éªŒè¯      â”‚    â”‚ â€¢ è®¢å•æ•°æ®      â”‚
â”‚ â€¢ çŠ¶æ€ç®¡ç†      â”‚    â”‚ â€¢ è®¤è¯æˆæƒ      â”‚    â”‚ â€¢ ç¤¾åŒºæ•°æ®      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js >= 16.0.0
- npm >= 8.0.0
- Docker Desktop (å¯é€‰ï¼Œç”¨äºå®¹å™¨åŒ–éƒ¨ç½²)

### æœ¬åœ°å¼€å‘

1. **å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/AdamAmon/blindboxmall-backside.git
cd blindboxmall-backside
```

2. **å®‰è£…ä¾èµ–**
```bash
npm install
```

3. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
```bash
npm run dev
```

4. **è®¿é—®åº”ç”¨**
- ä¸»åº”ç”¨: http://localhost:7001
- APIæ–‡æ¡£: http://localhost:7001/swagger-ui/index.html
- å¥åº·æ£€æŸ¥: http://localhost:7001/api/health

### Dockeréƒ¨ç½²

#### Windowsç³»ç»Ÿ
```cmd
# æ„å»ºå¹¶å¯åŠ¨
docker-deploy.bat build
docker-deploy.bat start

# æŸ¥çœ‹æ—¥å¿—
docker-deploy.bat logs

# åœæ­¢æœåŠ¡
docker-deploy.bat stop
```

#### Linux/Macç³»ç»Ÿ
```bash
# ç»™è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™
chmod +x docker-deploy.sh

# æ„å»ºå¹¶å¯åŠ¨
./docker-deploy.sh build
./docker-deploy.sh start

# æŸ¥çœ‹æ—¥å¿—
./docker-deploy.sh logs

# åœæ­¢æœåŠ¡
./docker-deploy.sh stop
```

## é¡¹ç›®ç»“æ„

```
blindboxmall-backside/
â”œâ”€â”€ src/                    # æºä»£ç 
â”‚   â”œâ”€â”€ controller/        # æ§åˆ¶å™¨å±‚
â”‚   â”‚   â”œâ”€â”€ auth/         # è®¤è¯ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ blindbox/     # ç›²ç›’ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ community/    # ç¤¾åŒºåŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ pay/          # æ”¯ä»˜ç›¸å…³
â”‚   â”‚   â””â”€â”€ user/         # ç”¨æˆ·ç®¡ç†
â”‚   â”œâ”€â”€ service/          # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ entity/           # æ•°æ®å®ä½“
â”‚   â”œâ”€â”€ dto/              # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”œâ”€â”€ middleware/       # ä¸­é—´ä»¶
â”‚   â””â”€â”€ filter/           # è¿‡æ»¤å™¨
â”œâ”€â”€ test/                 # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ public/               # é™æ€æ–‡ä»¶
â”œâ”€â”€ docs/                 # æ–‡æ¡£
â”œâ”€â”€ .github/              # GitHub Actions
â”œâ”€â”€ docker-compose.yml    # Dockerç¼–æ’
â”œâ”€â”€ Dockerfile           # Dockeré•œåƒ
â””â”€â”€ package.json         # é¡¹ç›®é…ç½®
```

## APIæ¥å£

### è®¤è¯ç›¸å…³
- `POST /api/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•

### ç›²ç›’ç›¸å…³
- `GET /api/blindbox` - è·å–ç›²ç›’åˆ—è¡¨
- `GET /api/blindbox/:id` - è·å–ç›²ç›’è¯¦æƒ…
- `POST /api/blindbox` - åˆ›å»ºç›²ç›’
- `POST /api/blindbox/draw` - æŠ½å¥–
- `GET /api/blindbox/:id/items` - è·å–ç›²ç›’å•†å“

### è®¢å•ç›¸å…³
- `POST /api/pay/order/create` - åˆ›å»ºè®¢å•
- `POST /api/pay/order/open` - å¼€ç›’
- `GET /api/pay/order/list` - è·å–è®¢å•åˆ—è¡¨

### ç¤¾åŒºç›¸å…³
- `POST /api/community/show/create` - åˆ›å»ºç©å®¶ç§€
- `GET /api/community/show/list` - è·å–ç©å®¶ç§€åˆ—è¡¨
- `POST /api/community/show/like` - ç‚¹èµ

## æµ‹è¯•

### è¿è¡Œæµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run cov

# ä»£ç è§„èŒƒæ£€æŸ¥
npm run lint
```

### æµ‹è¯•è¦†ç›–ç‡
é¡¹ç›®åŒ…å«å®Œæ•´çš„å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ï¼Œæµ‹è¯•è¦†ç›–ç‡è¶…è¿‡80%ã€‚

## éƒ¨ç½²è¯´æ˜

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
1. é…ç½®ç¯å¢ƒå˜é‡ï¼ˆå‚è€ƒ `ç¯å¢ƒå˜é‡é…ç½®è¯´æ˜.md`ï¼‰
2. æ„å»ºé¡¹ç›®ï¼š`npm run build`
3. å¯åŠ¨æœåŠ¡ï¼š`npm start`

### Dockeréƒ¨ç½²
è¯¦ç»†è¯´æ˜è¯·å‚è€ƒ `Dockeréƒ¨ç½²è¯´æ˜.md`

## å¼€å‘è§„èŒƒ

### ä»£ç è§„èŒƒ
- ä½¿ç”¨ESLintè¿›è¡Œä»£ç æ£€æŸ¥
- éµå¾ªTypeScriptä¸¥æ ¼æ¨¡å¼
- ä½¿ç”¨Prettierè¿›è¡Œä»£ç æ ¼å¼åŒ–

### Gitæäº¤è§„èŒƒ
- feat: æ–°åŠŸèƒ½
- fix: ä¿®å¤bug
- docs: æ–‡æ¡£æ›´æ–°
- style: ä»£ç æ ¼å¼è°ƒæ•´
- refactor: ä»£ç é‡æ„
- test: æµ‹è¯•ç›¸å…³
- chore: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

## è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## è”ç³»æ–¹å¼

- é¡¹ç›®åœ°å€: https://github.com/AdamAmon/blindboxmall-backside
- å‰ç«¯åœ°å€: https://github.com/AdamAmon/blindboxmall-fronted

## æ›´æ–°æ—¥å¿—

### v1.0.0 (2024-12-19)
- âœ… å®ŒæˆåŸºç¡€8é¡¹åŠŸèƒ½
- âœ… å®ç°æ”¯ä»˜å®æ”¯ä»˜é›†æˆ
- âœ… å®ŒæˆDockerå®¹å™¨åŒ–éƒ¨ç½²
- âœ… é…ç½®GitHub Actions CI/CD
- âœ… å®Œæˆå®Œæ•´çš„æµ‹è¯•è¦†ç›–
- âœ… å®ç°ç©å®¶ç§€ç¤¾åŒºåŠŸèƒ½
- âœ… æ”¯æŒå¤šå¹³å°éƒ¨ç½²

---

**æ³¨æ„**: æœ¬é¡¹ç›®ä¸ºWebå¼€å‘å¤§ä½œä¸šï¼Œå®ç°äº†å®Œæ•´çš„ç›²ç›’æŠ½å¥–å•†åŸåŠŸèƒ½ï¼Œæ”¯æŒå¼€å‘ç¯å¢ƒéƒ¨ç½²ã€‚
